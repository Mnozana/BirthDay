<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 20th Birthday My Love!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600;700&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="login-container">
        <div class="login-background"></div>
        <div class="login-box">
            <div class="login-icon">
                <i class="fas fa-birthday-cake"></i>
            </div>
            <h1 class="login-title">Welcome to Your 20th Birthday!</h1>
            <p class="login-subtitle">Enter your birth date to unlock your special birthday surprise!</p>
            
            <div class="birthday-input-group">
                <label for="birthdate"><i class="fas fa-calendar-alt"></i> Your Birth Date:</label>
                <input type="date" id="birthdate" class="birthday-input" required>
                <p class="hint"><i class="fas fa-lightbulb"></i> Hint: Your special day!</p>
            </div>
            
            <button id="login-button" class="login-btn">
                <i class="fas fa-unlock-alt"></i> Unlock Your 20th Birthday Surprise
            </button>
            
            <div id="login-error" class="error-message">
                <i class="fas fa-exclamation-triangle"></i> Oops! That's not the correct birth date. Try again!
            </div>
            
            <div class="countdown">
                <p>You have <span class="countdown-number" id="attempts-left">3</span> attempts to unlock your birthday surprise!</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Login-specific JavaScript
        const correctBirthdate = "2006-01-07";
        let attemptsLeft = 5;
        
        // Set the maximum date to today for the date picker
        const today = new Date();
        const formattedToday = today.toISOString().split('T')[0];
        document.getElementById('birthdate').setAttribute('max', formattedToday);
        
        document.getElementById('login-button').addEventListener('click', function() {
            const enteredBirthdate = document.getElementById('birthdate').value;
            const errorMessage = document.getElementById('login-error');
            
            if (enteredBirthdate === correctBirthdate) {
                // Successful login - redirect to main page
                localStorage.setItem('birthdayAuthenticated', 'true');
                window.location.href = 'main.html';
            } else {
                // Failed login
                attemptsLeft--;
                document.getElementById('attempts-left').textContent = attemptsLeft;
                
                errorMessage.style.display = 'block';
                errorMessage.style.animation = 'fadeIn 0.3s ease-out';
                
                document.querySelector('.login-box').style.animation = 'none';
                setTimeout(() => {
                    document.querySelector('.login-box').style.animation = 'shake 0.5s ease-in-out';
                }, 10);
                
                createErrorConfetti(30);
                
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                    document.querySelector('.login-box').style.animation = 'fadeIn 0.8s ease-out';
                }, 3000);
                
                if (attemptsLeft <= 0) {
                    this.disabled = true;
                    this.innerHTML = '<i class="fas fa-lock"></i> Access Locked';
                    this.style.background = "#95a5a6";
                    errorMessage.innerHTML = '<i class="fas fa-exclamation-circle"></i> Access locked! Please refresh the page and try again.';
                    errorMessage.style.display = 'block';
                }
            }
        });
        
        // Enter key support
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('login-button').click();
            }
        });
        
        function createErrorConfetti(count) {
            const container = document.createElement('div');
            container.style.position = 'fixed';
            container.style.top = '0';
            container.style.left = '0';
            container.style.width = '100%';
            container.style.height = '100%';
            container.style.pointerEvents = 'none';
            container.style.zIndex = '9999';
            document.body.appendChild(container);
            
            const colors = ['#e74c3c', '#c0392b', '#e67e22'];
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'absolute';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                container.appendChild(confetti);
                
                const animation = confetti.animate([
                    { top: '-10px', opacity: 1, transform: 'rotate(0deg)' },
                    { top: '50vh', opacity: 0.7, transform: `rotate(${Math.random() * 360}deg)` }
                ], {
                    duration: Math.random() * 2000 + 1000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                animation.onfinish = () => {
                    confetti.remove();
                    if (container.children.length === 0) {
                        container.remove();
                    }
                };
            }
        }
    </script>
</body>
</html>